# CLAUDE.md

このファイルは、Claude Code (claude.ai/code) がこのリポジトリで作業する際のガイダンスを提供します。

## プロジェクト概要

手書きの日本語作業記録をスマートフォンで撮影し、OCR処理でテキスト化してGoogleスプレッドシートの従業員個人シートに保存するアプリケーションです。

## アーキテクチャ

**PWA (Progressive Web App) アーキテクチャ**を採用し、以下の技術スタックを使用：
- **フロントエンド**: React + TypeScript + Material-UI + PWA機能
- **OCR処理**: GPT-4.1 Vision API（日本語手書き文字認識）
- **データ保存**: Google Sheets API（従業員個人シート）
- **ホスティング**: GitHub Pages（無料ホスティング）
- **状態管理**: Zustand（軽量状態管理）

## 主要機能

- **4段階のユーザーフロー**: 撮影 → OCR処理 → 確認・修正 → シート保存
- **従業員個人シート**: 各従業員の月次データを個別シートで管理
- **マスターデータ管理**: 従業員・商品のマスター情報を中央管理
- **自動データ補正**: OCR結果をマスターデータで自動補正
- **重複処理**: 同一従業員・同一日の複数作業セッションを自動マージ

## Googleスプレッドシート構造

`スプレッドシート構造.md`に基づく：

### シート種類：
1. **管理シート（「管理」）**: 従業員・商品のマスターデータ
2. **個人シート（`{従業員名}_{YYYY}年{MM}月`）**: 従業員別月次データ（21日〜20日サイクル）

### 個人シートの列構成：
- A列: 日付（6/3, 2024-06-03）
- C列: 商品名
- D列: 開始時刻
- E列: 終了時刻
- F列: 休憩時間
- H列: 生産数（手作業）
- J列: 機械開始時刻
- K列: 機械終了時刻
- L列: 機械休憩時間
- N列: 機械生産数
- P列: 備考

## データフロー

1. ユーザーが作業記録写真をアップロード
2. OpenAI APIでOCR処理 → JSON結果取得
3. 管理シートのマスターデータで自動補正
4. ユーザーが確認・修正
5. 該当する従業員個人シートに保存
6. 同一従業員・同一日の重複エントリを自動マージ

## 対象ユーザー

- **単一ユーザー運用**（デジタル苦手）
- **コスト重視**: 無料ホスティング + GPT API使用料のみ（月約500円）
- **シンプルUX**: 大きなボタン、明確なアイコン、段階的ガイダンス

## 開発環境

以下を使用した開発を想定：
- Node.js + React + TypeScript
- Vite（ビルドツール）
- GitHub Actions（CI/CD）
- GitHub Pages（デプロイ）

## 重要な注意事項

- サーバーバックエンド不要（クライアントサイドのみ）
- Google Sheetsがデータベースとして機能
- OCR結果は日本語作業記録に特化した構造化
- 従業員個人シートは自動管理
- 1日複数作業セッションのデータマージ処理あり

## コーディングルール
- gpt-4.1のモデルを使用すること
- gptへのプロンプトはプロンプトのファイルを作ること、これはプロンプトの調整をしやすくするため、ファイルで管理します


## 開発の進め方
- 段階的に私が確認をしながら進めたいので、フェーズ事で開発を進め、私が確認し、修正や変
更などをしながら段階的に作ります